# =============================================================================
# Prophit Agent — Environment Variables
# =============================================================================
# Copy this file to .env and fill in your values.
# Variables marked [required] must be set. Others have sensible defaults.

# --- Core (always required) ---
RPC_URL=http://127.0.0.1:8545                # [required] BSC RPC endpoint
PRIVATE_KEY=0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80  # [required] EOA private key
CHAIN_ID=31337                                # 56 for BSC mainnet, 31337 for local Anvil
PORT=3001                                     # Agent HTTP API port
API_KEY=                                      # [required on mainnet] Bearer token for agent API endpoints

# --- Execution Mode ---
EXECUTION_MODE=clob                           # "clob" (EOA → CLOB APIs) or "vault" (on-chain via ProphitVault)
DRY_RUN=false                                 # true = log trades but don't execute

# --- Vault Mode Only (required when EXECUTION_MODE=vault) ---
VAULT_ADDRESS=
ADAPTER_A_ADDRESS=
ADAPTER_B_ADDRESS=
USDT_ADDRESS=0x55d398326f99059fF775485246999027B3197955   # BSC USDT (auto-defaults in CLOB mode)
MARKET_ID=
GAS_TO_USDT_RATE=3000000000                   # Native token price in 6-dec USDT (for gas cost estimation)

# --- Trading Parameters ---
MIN_SPREAD_BPS=100                            # Minimum spread (basis points) to execute
MAX_POSITION_SIZE=500000000                   # Max position size per side (6-dec USDT)
SCAN_INTERVAL_MS=5000                         # Scan loop interval (ms)
DAILY_LOSS_LIMIT=50000000                     # Daily loss limit (6-dec USDT, 50 = $50)

# --- CLOB Configuration ---
PROBABLE_EXCHANGE_ADDRESS=0xf99f5367ce708c66f0860b77b4331301a5597c86
PREDICT_EXCHANGE_ADDRESS=0x8BC070BEdAB741406F4B1Eb65A72bee27894B689
ORDER_EXPIRATION_SEC=300                      # Order TTL in seconds
MAX_ORDER_RETRIES=2
FILL_POLL_INTERVAL_MS=5000                    # Poll for fill status every N ms
FILL_POLL_TIMEOUT_MS=60000                    # Give up polling after N ms

# --- Probable (BNB Chain CLOB, incubated by PancakeSwap) ---
PROBABLE_API_BASE=https://api.probable.markets
PROBABLE_EVENTS_API_BASE=https://market-api.probable.markets
PROBABLE_ADAPTER_ADDRESS=                     # Only needed for vault mode
PROBABLE_PROXY_ADDRESS=                       # Gnosis Safe proxy address (if using Safe wallet)
PROBABLE_MARKET_IDS=                          # JSON array: ["0x...", "0x..."]
PROBABLE_MARKET_MAP=                          # JSON: {"sharedMarketId": {"probableMarketId": "123", "conditionId": "0x...", "yesTokenId": "...", "noTokenId": "..."}}

# --- Predict.fun (BNB Chain CLOB) ---
PREDICT_API_BASE=https://api.predict.fun
PREDICT_API_KEY=                              # [required for Predict.fun] x-api-key header
PREDICT_ADAPTER_ADDRESS=                      # Only needed for vault mode
PREDICT_MARKET_MAP=                           # JSON: {"sharedMarketId": {"predictMarketId": "123", "yesTokenId": "...", "noTokenId": "..."}}

# --- Opinion (BNB Chain, blocked on API key) ---
OPINION_API_BASE=https://openapi.opinion.trade/openapi
OPINION_API_KEY=
OPINION_ADAPTER_ADDRESS=
OPINION_TOKEN_MAP=                            # JSON: {"sharedMarketId": {"yesTokenId": "...", "noTokenId": "...", "topicId": "..."}}

# --- Auto-Discovery ---
AUTO_DISCOVER=false                           # Auto-match markets across platforms on startup

# --- AI Semantic Matching (optional) ---
OPENAI_API_KEY=
MATCHING_SIMILARITY_THRESHOLD=0.85
MATCHING_CONFIDENCE_THRESHOLD=0.90

# --- Yield Rotation (optional) ---
YIELD_ROTATION_ENABLED=false
MIN_YIELD_IMPROVEMENT_BPS=200

# --- Persistence ---
STATE_FILE_PATH=                              # Defaults to ./agent-state.json
